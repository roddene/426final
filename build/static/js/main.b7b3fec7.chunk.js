(this.webpackJsonpfin=this.webpackJsonpfin||[]).push([[0],{14:function(t,e,n){},23:function(t,e,n){},41:function(t,e,n){"use strict";n.r(e);var s=n(1),a=n.n(s),i=n(12),o=n.n(i),r=(n(23),n(3)),l=n.n(r),c=n(8),u=n(4),p=n(5),d=n(7),h=n(6),g=(n(14),n(9)),f=n(11),y=n(0),j=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).state={},s}return Object(p.a)(n,[{key:"render",value:function(){var t=this;return Object(y.jsxs)("div",{className:"Song",children:[Object(y.jsx)("div",{class:"song"}),Object(y.jsx)("h4",{class:"songcomponent",children:this.props.name}),Object(y.jsx)("h4",{class:"songcomponent",children:this.props.artist}),Object(y.jsxs)("h4",{class:"songcomponent",children:[Math.floor(this.props.duration/60),":",(this.props.duration%60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})]}),Object(y.jsx)("button",{class:"songcomponent",onClick:function(){return t.props.playHandler(t.props.id,t.props.name,t.props.artist,t.props.duration)},children:"Play"}),Object(y.jsx)("button",{class:"songcomponent",onClick:function(){return t.props.deleteHandler(t.props.id,t.props.playlistId)},children:"Remove"})]})}}]),n}(a.a.Component),b=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).playSong=function(t,e,n,a){s.props.playSongHandler(t,e,n,a)},s.state={name:t.name,owner:t.owner,songs:t.songs,songCount:t.songs.length},s.componentWillReceiveProps=s.componentWillReceiveProps.bind(Object(g.a)(s)),s.deleteSong=s.deleteSong.bind(Object(g.a)(s)),s}return Object(p.a)(n,[{key:"componentWillReceiveProps",value:function(t){this.setState({songs:t.songs,songCount:t.songs.length})}},{key:"deleteSong",value:function(){var t=Object(c.a)(l.a.mark((function t(e,n){var s,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/deleteSong",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(f.a)({token:localStorage.getItem("token"),videoId:e,playlistId:n},"playlistId",n))}).then((function(t){return t.json()}));case 3:t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:s=this.state.songs.filter((function(t){return t.id!=e})),a=s.length,this.setState((function(t){return{songs:s,songCount:a}}));case 12:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(y.jsxs)("div",{className:"playlist",children:[Object(y.jsx)("h2",{children:this.state.name}),Object(y.jsx)("button",{onClick:function(){return t.props.clearPlaylist()},children:"Go to all playlists"}),this.state.songCount?this.state.songs.map((function(e){var n=e.songName,s=e.artist,a=e.id,i=e.duration;return Object(y.jsx)(j,{name:n,artist:s,id:a,playlistId:t.props.playlistId,duration:i,deleteHandler:t.deleteSong,playHandler:t.playSong})})):Object(y.jsx)("p",{children:"Playlist Empty"})]})}}]),n}(a.a.Component),v=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).state={},s}return Object(p.a)(n,[{key:"render",value:function(){var t=this;return Object(y.jsx)("div",{className:"playlistlist",children:this.props.playlists.map((function(e){var n=e.name,s=e.owner,a=e._id;return Object(y.jsxs)("div",{class:"playlistinfo",children:[Object(y.jsx)("h5",{class:"playlistinfodata",children:n}),Object(y.jsx)("h5",{class:"playlistinfodata",children:s}),Object(y.jsx)("button",{class:"playlistinfodata",onClick:function(){return t.props.selectPlaylist(n,s,a)},children:"Open"}),Object(y.jsx)("button",{class:"playlistinfodta",onClick:function(){return t.props.deletePlaylist(a)},children:"Delete"})]})}))})}}]),n}(a.a.Component),m=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).state={},s}return Object(p.a)(n,[{key:"render",value:function(){var t=this;return Object(y.jsx)("div",{className:"inputfield",children:Object(y.jsx)("input",{type:this.props.type,placeholder:this.props.placeholder,value:this.props.value,onChange:function(e){return t.props.onChange(e.target.value)}})})}}]),n}(a.a.Component),O=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).onChange=function(t){var e=s.props.suggestions,n=t.currentTarget.value;s.props.updateSuggest(n);var a=e;s.setState({activeSuggestion:0,filteredSuggestions:a,showSuggestions:!0,userInput:t.currentTarget.value})},s.onClick=function(t){s.setState({activeSuggestion:0,filteredSuggestions:[],showSuggestions:!1,userInput:t.currentTarget.innerText})},s.onKeyDown=function(t){var e=s.state,n=e.activeSuggestion,a=e.filteredSuggestions;if(13===t.keyCode)s.setState({activeSuggestion:0,showSuggestions:!1,userInput:a[n]});else if(38===t.keyCode){if(0===n)return;s.setState({activeSuggestion:n-1})}else if(40===t.keyCode){if(n-1===a.length)return;s.setState({activeSuggestion:n+1})}},s.state={activeSuggestion:0,filteredSuggestions:t.suggestions,showSuggestions:!0,userInput:t.inputVal},s.componentWillReceiveProps=s.componentWillReceiveProps.bind(Object(g.a)(s)),s.youtubeSearch=s.youtubeSearch.bind(Object(g.a)(s)),s}return Object(p.a)(n,[{key:"componentWillReceiveProps",value:function(t){this.setState({filteredSuggestions:t.suggestions})}},{key:"youtubeSearch",value:function(){var t=Object(c.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("activenum",this.state.activeSuggestion),console.log(this.state.filteredSuggestions),console.log(this.state.userInput," === ",this.state.filteredSuggestions[this.state.activeSuggestion]),!this.state.userInput){t.next=16;break}return t.prev=4,t.next=7,fetch("/api/youtubeSearch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token"),query:this.state.userInput})}).then((function(t){return t.json()}));case 7:e=t.sent,this.props.addSong(this.state.userInput.split(";"),e.videoId,e.duration),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.log(t.t0);case 14:t.next=17;break;case 16:console.log("song could not be added, invalid input");case 17:case"end":return t.stop()}}),t,this,[[4,11]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t,e=this,n=this.onChange,s=this.onClick,a=this.onKeyDown,i=this.state,o=i.activeSuggestion,r=i.filteredSuggestions,l=i.showSuggestions,c=i.userInput;return l&&c&&(t=r.length?Object(y.jsx)("ul",{class:"suggestions",children:r.map((function(t,e){var n;return e===o&&(n="suggestion-active"),Object(y.jsx)("li",{className:n,onClick:s,children:t},t)}))}):Object(y.jsx)("div",{class:"no-suggestions",children:Object(y.jsx)("em",{children:"No suggestions, you're on your own!"})})),Object(y.jsxs)("div",{id:"autocomplete",children:[Object(y.jsx)("input",{type:"text",placeholder:"Add a Song!",onChange:n,onKeyDown:a,value:c}),Object(y.jsx)("button",{onClick:function(){return e.youtubeSearch()},children:"Add Song"}),t]})}}]),n}(s.Component),S=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).addSong=function(t,e,n){s.props.addSong(t[0],t[1],n,e)},s.state={inputVal:"",possibleSongs:[],showSuggestions:!1,songCount:0,showing:!0},s.updateSpotifyResults=s.updateSpotifyResults.bind(Object(g.a)(s)),s}return Object(p.a)(n,[{key:"updateSpotifyResults",value:function(){var t=Object(c.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("searching"),this.setState((function(t){return{inputVal:e}})),t.next=4,fetch("/api/spotifySearch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token"),query:e})}).then((function(t){return t.json()}));case 4:"error"!=(n=t.sent).status&&(this.setState((function(t){return{possibleSongs:n,songCount:n.length,inputVal:e}})),setTimeout(this.setState({showing:!0,possibleSongs:n,inputVal:e}),500));case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(y.jsx)("div",{className:"songsearcher",children:Object(y.jsx)(O,{addSong:this.addSong,suggestions:this.state.possibleSongs.map((function(t){return t.songName+";"+t.artistName})),updateSuggest:this.updateSpotifyResults,inputVal:this.state.inputVal})})}}]),n}(a.a.Component),x=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).clearPlaylist=function(){s.setState((function(t){return{isActive:!1}}))},s.updateNewPlaylist=function(t){s.setState((function(e){return{newPlaylistName:t}}))},s.state={username:s.props.username,playlistName:"playlistnam",playlistOwner:"ownn",playlistId:"playlist idenetification",newPlaylistName:"",songs:[],isActive:!1,playlists:[]},s.addNewPlaylist=s.addNewPlaylist.bind(Object(g.a)(s)),s.updatePlaylistlist=s.updatePlaylistlist.bind(Object(g.a)(s)),s.selectPlaylist=s.selectPlaylist.bind(Object(g.a)(s)),s.addSong=s.addSong.bind(Object(g.a)(s)),s.deletePlaylist=s.deletePlaylist.bind(Object(g.a)(s)),s}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.updatePlaylistlist()}},{key:"updatePlaylistlist",value:function(){var t=Object(c.a)(l.a.mark((function t(){var e,n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=localStorage.getItem("token"),n=this.props.username,t.next=4,fetch("/api/getPlaylists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,username:n})}).then((function(t){return t.json()}));case 4:s=t.sent,this.setState((function(t){return{playlists:s}}));case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"selectPlaylist",value:function(){var t=Object(c.a)(l.a.mark((function t(e,n,s){var a,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("token"),console.log("selected"),console.log(s),this.setState((function(t){return{isActive:!0,playlistName:e,owner:n,playlistId:s}})),t.next=6,fetch("/api/selectPlaylist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a,id:s})}).then((function(t){return t.json()}));case 6:i=t.sent,console.log(i),this.setState((function(t){return{songs:i}})),this.props.changePlaylist(i),console.log("this.state.songs",this.state.songs);case 11:case"end":return t.stop()}}),t,this)})));return function(e,n,s){return t.apply(this,arguments)}}()},{key:"deletePlaylist",value:function(){var t=Object(c.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/deletePlaylist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token"),id:e})}).then((function(t){return t.json()}));case 2:t.sent,this.updatePlaylistlist(),this.selectPlaylist(this.state.playlistName,this.state.playlistOwner,this.state.playlistId);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"addNewPlaylist",value:function(){var t=Object(c.a)(l.a.mark((function t(){var e,n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state.newPlaylistName,n=this.state.username,s=this.props.token,console.log("newplay",e),t.next=6,fetch("/api/createPlaylist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,username:n,newplay:e})}).then((function(t){return t.json()}));case 6:t.sent,this.updatePlaylistlist();case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"addSong",value:function(){var t=Object(c.a)(l.a.mark((function t(e,n,s,a){var i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("add to playlist ",this.state.playlistId),i=localStorage.getItem("token"),t.next=4,fetch("/api/addSong",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:i,songName:e,artist:n,duration:s,videoId:a,playlistId:this.state.playlistId})}).then((function(t){return t.json()}));case 4:t.sent,this.selectPlaylist(this.state.playlistName,this.state.playlistOwner,this.state.playlistId);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n,s,a){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return this.state.isActive?Object(y.jsxs)("div",{className:"playlistselector",children:[Object(y.jsx)(S,{addSong:this.addSong}),Object(y.jsx)(b,{name:this.state.playlistName,playlistId:this.state.playlistId,owner:this.state.owner,songs:this.state.songs,playSongHandler:this.props.playSongHandler,clearPlaylist:this.clearPlaylist})]}):Object(y.jsxs)("div",{className:"playlistselector",children:[Object(y.jsx)("button",{onClick:this.addNewPlaylist,children:"Add Playlist"}),Object(y.jsx)(m,{type:"text",placeholder:"name",value:this.state.newPlaylistName?this.state.newPlaylistName:"",onChange:function(e){return t.updateNewPlaylist(e)}}),Object(y.jsx)(v,{playlists:this.state.playlists,selectPlaylist:this.selectPlaylist,deletePlaylist:this.deletePlaylist})]})}}]),n}(a.a.Component),k=n(15),C=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).componentDidMount=function(){s.myTimer()},s.componentWillUnmount=function(){clearInterval(s.myTimer)},s.myTimer=function(){setInterval((function(){s.state.isPlaying&&s.setState((function(t){return{curTime:t.curTime+1}}))}),1e3)},s.videoOnReady=function(t){console.log("ready"),s.setState((function(e){return{player:t.target,totalTime:t.target.getDuration()}}))},s.playVideo=function(t){s.state.player.playVideo(),s.setState((function(t){return{isPlaying:!0,totalTime:s.state.player.getDuration()}}))},s.pauseVideo=function(t){s.state.player.pauseVideo(),s.setState((function(t){return{isPlaying:!1}}))},s.updateProgress=function(t){s.setState((function(e){return{curTime:Math.round(t.target.getCurrentTime())}})),s.state.isPlaying&&s.playVideo()},s.endVideo=function(t){s.state.repeat?(s.state.player.seekTo(0,!1),s.playVideo()):s.nextSong()},s.changeRepeat=function(t){console.log(!s.state.repeat),s.setState((function(t){return{repeat:!s.state.repeat}}))},s.changeShuffle=function(t){s.setState((function(t){return{isShuffling:!s.state.isShuffling}}))},s.nextSong=function(t){if(s.state.playlist.length>1)if(s.state.isShuffling){for(var e=Math.floor(Math.random()*s.state.playlist.length);s.state.playlist[e].id==s.state.videoCode;)e=Math.floor(Math.random()*s.state.playlist.length);var n=s.state.playlist[e];s.setState((function(t){return{song:n.songName,artist:n.artist,videoCode:n.id,duration:n.duration}})),console.log("now playing",s.state.song)}else{s.state.playlist.length;var a=-1,i=s.state.videoCode;s.state.playlist.find((function(t,e){if(t.id===i)return a=e,e}));console.log("index",a);var o=0;a!==s.state.playlist.length-1&&(o=a+1);var r=s.state.playlist[o];s.setState((function(t){return{song:r.songName,artist:r.artist,videoCode:r.id,duration:r.duration}})),console.log("now playing shuffle",s.state.song)}else s.pauseVideo()},s.changeTime=function(t){console.log(Math.floor(s.state.totalTime*t.nativeEvent.offsetX/240)),s.state.player.seekTo(Math.floor(s.state.totalTime*t.nativeEvent.offsetX/240)),s.setState((function(e){return{curTime:Math.floor(s.state.totalTime*t.nativeEvent.offsetX/240)}}))},s.state={videoCode:t.videoCode,curTime:0,totalTime:t.duration,repeat:!1,player:"",isPlaying:!1,isShuffling:!1,song:t.song,artist:t.artist,playlist:t.playlist,opts:{playerVars:{autoplay:0,loop:!0}}},s}return Object(p.a)(n,[{key:"componentWillReceiveProps",value:function(t){console.log("player will recieve"),this.setState({playlist:t.playlist,videoCode:t.videoCode,artist:t.artist,song:t.song,duration:t.duration})}},{key:"render",value:function(){var t=this;return Object(y.jsxs)("div",{className:"Player",children:[Object(y.jsx)("button",{onClick:this.playVideo,children:"Play"}),Object(y.jsx)("button",{onClick:this.pauseVideo,children:"Pause"}),Object(y.jsx)("button",{onClick:this.changeRepeat,children:"Repeat"}),Object(y.jsx)("button",{onClick:this.nextSong,children:"Next"}),Object(y.jsx)("button",{onClick:this.changeShuffle,children:"Shuffle"}),Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{id:"progress",children:[Object(y.jsxs)("p",{class:"timedisplay",children:[Math.floor(this.state.curTime/60),":",(this.state.curTime%60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})]}),Object(y.jsx)("div",{id:"progressbardiv",onClick:this.changeTime,children:Object(y.jsx)("progress",{id:"progressbar",value:this.state.curTime,max:this.props.duration})}),Object(y.jsxs)("p",{class:"timedisplay",children:[Math.floor(this.state.duration/60),":",(this.state.duration%60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})]})]}),Object(y.jsx)("div",{id:"currentsonginfo",children:Object(y.jsxs)("p",{children:[this.state.song," - ",this.state.artist]})}),Object(y.jsx)(k.a,{videoId:this.state.videoCode,playlist:this.state.videoCode,containerClassName:"embed",opts:this.state.opts,onReady:function(e){return t.videoOnReady(e)},onStateChange:function(e){return t.updateProgress(e)},onEnd:function(e){return t.endVideo(e)}})]})]})}}]),n}(a.a.Component),w=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).changePlaylist=function(t){console.log("change playlist"),s.setState((function(e){return{songs:t}}))},s.playSong=function(t,e,n,a){console.log(a),console.log(s.state),s.setState((function(s){return{videoCode:t,artist:n,song:e,duration:a}}))},s.state={videoCode:"dQw4w9WgXcQ",artist:"Playlist",song:"Choose a",duration:212,songs:[]},s}return Object(p.a)(n,[{key:"render",value:function(){return Object(y.jsxs)("div",{className:"Controller",children:[Object(y.jsx)(C,{videoCode:this.state.videoCode,artist:this.state.artist,song:this.state.song,duration:this.state.duration,playlist:this.state.songs}),Object(y.jsx)(x,{playSongHandler:this.playSong,token:this.props.token,username:this.props.username,changePlaylist:this.changePlaylist})]})}}]),n}(a.a.Component),P=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).state={},s}return Object(p.a)(n,[{key:"render",value:function(){var t=this;return Object(y.jsx)("div",{className:"submitbutton",children:Object(y.jsx)("button",{disabled:this.props.disabled,onClick:function(){return t.props.onClick()},children:this.props.name})})}}]),n}(a.a.Component),I=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).state={username:"",password:"",buttonDisabled:!1},s}return Object(p.a)(n,[{key:"setInputValue",value:function(t,e){(e=e.trim()).length>20||this.setState(Object(f.a)({},t,e))}},{key:"resetForm",value:function(){this.setState({username:"",password:"",buttonDisabled:!1})}},{key:"login",value:function(){var t=Object(c.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state.username&&this.state.password){t.next=2;break}return t.abrupt("return");case 2:return this.setState({buttonDisabled:!0}),t.prev=3,t.next=6,fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password})}).then((function(t){return t.json()}));case 6:"ok"===(e=t.sent).status?(console.log("okay"),this.props.updateState(this.state.username,e.data,!0),localStorage.setItem("token",e.data),console.log("resultdata",e.data)):"error"===e.status&&(console.log("error return"),this.resetForm(),console.log(e.error)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0);case 13:this.setState({buttonDisabled:!1});case 14:case"end":return t.stop()}}),t,this,[[3,10]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(y.jsxs)("div",{className:"loginform",children:["Log in",Object(y.jsx)(m,{type:"text",placeholder:"username",value:this.state.username?this.state.username:"",onChange:function(e){return t.setInputValue("username",e)}}),Object(y.jsx)(m,{type:"password",placeholder:"password",value:this.state.password?this.state.password:"",onChange:function(e){return t.setInputValue("password",e)}}),Object(y.jsx)(P,{name:"Login",disabled:this.state.buttonDisabled,onClick:function(){return t.login()}})]})}}]),n}(a.a.Component),N=n(18),T=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).state={username:"",password:"",buttonDisabled:!1},s}return Object(p.a)(n,[{key:"setInputValue",value:function(t,e){(e=e.trim()).length>20||this.setState(Object(f.a)({},t,e))}},{key:"resetForm",value:function(){this.setState({username:"",password:"",buttonDisabled:!1})}},{key:"register",value:function(){var t=Object(c.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state.username&&this.state.password){t.next=2;break}return t.abrupt("return");case 2:return this.setState({buttonDisabled:!0}),t.prev=3,t.next=6,fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password})}).then((function(t){return t.json()}));case 6:"ok"===(e=t.sent).status?alert("Registration successful!"):"error"===e.status&&(alert("Error Registering"),this.resetForm()),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0);case 13:this.setState({buttonDisabled:!1});case 14:case"end":return t.stop()}}),t,this,[[3,10]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(y.jsxs)("div",{className:"registerform",children:["Log in",Object(y.jsx)(m,{type:"text",placeholder:"username",value:this.state.username?this.state.username:"",onChange:function(e){return t.setInputValue("username",e)}}),Object(y.jsx)(m,{type:"password",placeholder:"password",value:this.state.password?this.state.password:"",onChange:function(e){return t.setInputValue("password",e)}}),Object(y.jsx)(P,{name:"Register",disabled:this.state.buttonDisabled,onClick:function(){return t.register()}})]})}}]),n}(a.a.Component),V=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).logout=function(){localStorage.setItem("token",""),s.setState((function(t){return{token:"",isLoggedIn:!1,username:""}}))},s.updateState=function(t,e,n){s.setState((function(s){return{token:e,username:t,isLoggedIn:n}}))},s.state={token:"",isLoggedIn:!1,username:"username"},s}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=Object(c.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState((function(t){return{token:localStorage.getItem("token")}})),t.next=3,fetch("/api/home",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token")})}).then((function(t){return t.json()}));case 3:e=t.sent,console.log(e);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return this.state.isLoggedIn?Object(y.jsx)("div",{className:"App",children:Object(y.jsxs)("header",{className:"App-header",children:["Welcome, ",this.state.username,Object(y.jsx)(w,{username:this.state.username,token:this.state.token}),Object(y.jsx)(P,{name:"logout",disabled:!1,onClick:function(){return t.logout()}})]})}):Object(y.jsx)("div",{className:"App",children:Object(y.jsxs)("header",{className:"App-header",children:[Object(y.jsx)(I,{updateState:this.updateState}),Object(y.jsx)(T,{})]})})}}]),n}(a.a.Component),D=Object(N.a)(V),R=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(e){var n=e.getCLS,s=e.getFID,a=e.getFCP,i=e.getLCP,o=e.getTTFB;n(t),s(t),a(t),i(t),o(t)}))};o.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(D,{})}),document.getElementById("root")),R()}},[[41,1,2]]]);
//# sourceMappingURL=main.b7b3fec7.chunk.js.map